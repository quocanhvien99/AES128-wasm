<html>
	<head>
		<meta charset="utf-8" />
	</head>
	<body>
		<form id="encForm">
			<label for="enc">Enter text to be Encrypted</label>
			<input name="enc" id="enc" placeholder="Enter plain text"> </input>
		</form>
		<p id="enc-result"></p>
		<form id="decForm">
			<label for="dec">Enter text to be Decrypted</label>
			<input name="dec" id="dec" placeholder="Enter text to Decrypt"> </input>				
		</form>
		<p id="dec-result"></p>	

		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			WebAssembly.instantiateStreaming(fetch('main.wasm'), go.importObject).then((result) => {
				go.run(result.instance);
			});
			const encrypt = (e) => {
				e.preventDefault();
				const plainText = document.querySelector('#enc').value;
				const cipherBuff = enc(plainText)
				console.log(cipherBuff)
				document.querySelector('#enc-result').innerHTML = new TextDecoder().decode(cipherBuff);
			};
			document.querySelector('#encForm').addEventListener("submit", encrypt)

			const decrypt = (e) => {
				e.preventDefault();
				const cipherText = document.querySelector('#dec').value;
				const cipherBuff = new TextEncoder('utf-8').encode(cipherText)
				const plainBuff = dec(cipherBuff)
				console.log(plainBuff)
				document.querySelector('#dec-result').innerHTML = new TextDecoder().decode(plainBuff);
			};
			document.querySelector('#decForm').addEventListener("submit", decrypt)
		</script>
	</body>
</html>
